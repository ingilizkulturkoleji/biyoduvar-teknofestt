<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="description" content="Bƒ∞YODUVAR ‚Äî Sens√∂r kontroll√º, bitki tabanlƒ± aktif hava kalitesi iyile≈ütirme sistemi.">
  <meta name="theme-color" content="#0b0f16" />
  <title>Bƒ∞YODUVAR | Bilim Ka≈üifleri</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0f16;
      --bg2:#0f1624;

      --card: rgba(255,255,255,0.045);
      --card2: rgba(255,255,255,0.06);

      --stroke: rgba(255,255,255,0.10);
      --stroke2: rgba(255,255,255,0.14);

      --text:#f4f6ff;
      --muted: rgba(244,246,255,0.72);
      --muted2: rgba(244,246,255,0.52);

      --g:#48bb78;
      --b:#4aa3ff;
      --r:#ff5b7a;
      --y:#ffd166;

      --wood:#9a7b6c;
      --wood2:#6b4f45;

      --max: 1140px;
      --radius: 22px;
      --shadow: 0 18px 55px rgba(0,0,0,0.55);
      --shadow2: 0 10px 25px rgba(0,0,0,0.35);
      --blur: blur(18px);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: Montserrat, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 900px at 10% -10%, rgba(72,187,120,0.09), transparent 60%),
        radial-gradient(1000px 800px at 95% 15%, rgba(74,163,255,0.085), transparent 55%),
        radial-gradient(900px 700px at 70% 120%, rgba(255,91,122,0.065), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2) 70%, var(--bg));
      overflow-x:hidden;
      scroll-behavior:smooth;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    #air{ position:fixed; inset:0; width:100%; height:100%; z-index:0; pointer-events:none; opacity:.62; }
    .grain{
      position:fixed; inset:0; z-index:1; pointer-events:none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      opacity:.14;
    }

    .progress{ position:fixed; top:0; left:0; width:100%; height:4px; z-index:1000; }
    .progress span{
      display:block; height:100%; width:0%;
      background: linear-gradient(90deg, var(--g), var(--b), var(--r));
      box-shadow: 0 0 24px rgba(72,187,120,0.28);
      transition: width .08s linear;
    }

    .container{ width:min(var(--max), calc(100% - 40px)); margin:0 auto; position:relative; z-index:2; }
    section{ padding: 92px 0; position:relative; z-index:2; }
    section::before{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(255,255,255,0.018), rgba(255,255,255,0.008));
      pointer-events:none;
      z-index:-1;
    }
    section[data-accent="g"]::before{
      background:
        radial-gradient(900px 420px at 18% 0%, rgba(72,187,120,0.045), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,0.018), rgba(255,255,255,0.008));
    }
    section[data-accent="b"]::before{
      background:
        radial-gradient(900px 420px at 18% 0%, rgba(74,163,255,0.04), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,0.018), rgba(255,255,255,0.008));
    }
    section[data-accent="r"]::before{
      background:
        radial-gradient(900px 420px at 18% 0%, rgba(255,91,122,0.035), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,0.018), rgba(255,255,255,0.008));
    }
    @media (max-width: 900px){ section{ padding: 70px 0; } }
    @media (max-width: 520px){ section{ padding: 60px 0; } }
    @media (max-width: 520px){ .container{ width: calc(100% - 26px); } }

    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      font-size: 12px; font-weight: 800; letter-spacing: 2.4px;
      text-transform: uppercase; color: rgba(255,255,255,0.82);
      margin-bottom: 14px;
    }
    .kicker::before{
      content:""; width: 14px; height: 14px; border-radius: 6px;
      background: linear-gradient(135deg, rgba(72,187,120,0.9), rgba(74,163,255,0.9));
      box-shadow: 0 0 20px rgba(74,163,255,0.20);
      opacity:.9;
    }

    h1,h2,h3{ margin:0; }
    h1{
      font-family: Rajdhani, sans-serif;
      font-weight: 700;
      letter-spacing: .5px;
      text-transform: uppercase;
      font-size: clamp(38px, 6.4vw, 78px);
      line-height: 1.02;
      margin: 10px 0 14px;
    }
    h2{
      font-family: Rajdhani, sans-serif;
      font-weight: 700;
      font-size: clamp(26px, 4.6vw, 40px);
      line-height:1.15;
      margin-bottom: 14px;
    }
    h3{
      font-family: Rajdhani, sans-serif;
      font-weight: 800;
      font-size: 22px;
      line-height:1.2;
      margin-bottom: 10px;
      letter-spacing:.2px;
    }
    .lead{
      color: var(--muted);
      font-weight: 400;
      font-size: clamp(15px, 2.1vw, 18px);
      line-height:1.75;
      max-width: 72ch;
      margin: 0;
    }
    @media (max-width: 520px){ .lead{ font-size: 15.5px; line-height: 1.8; } }

    .nav{
      position:fixed; top:18px; left:50%;
      transform:translateX(-50%);
      width:min(var(--max), calc(100% - 26px));
      z-index: 900;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(10,14,22,0.62);
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      box-shadow: 0 18px 55px rgba(0,0,0,0.55);
      padding: 10px 14px;
      display:flex; align-items:center; justify-content: space-between; gap: 10px;
    }
    .brand{ display:flex; align-items:center; gap:10px; cursor:pointer; user-select:none; white-space: nowrap; }
    .brand-badge{
      width:34px; height:34px; border-radius: 12px;
      background: radial-gradient(18px 18px at 30% 30%, rgba(255,255,255,0.18), transparent 60%),
                  linear-gradient(135deg, rgba(72,187,120,0.75), rgba(74,163,255,0.75));
      box-shadow: 0 0 26px rgba(74,163,255,0.18);
      border: 1px solid rgba(255,255,255,0.16);
    }
    .brand-name{
      font-family: Rajdhani, sans-serif;
      font-weight: 900;
      letter-spacing: 1px;
      font-size: 19px;
      color: var(--text);
    }
    .brand-name span{ color: var(--g); }

    .nav-actions{ display:flex; align-items:center; gap:10px; }
    .nav-links{ display:flex; align-items:center; gap: 6px; flex-wrap:wrap; }
    .nav-links a{
      text-decoration:none; color: rgba(244,246,255,0.70);
      font-size: 12.5px; font-weight: 700;
      padding: 8px 12px; border-radius: 999px;
      transition: .2s ease; border: 1px solid transparent; white-space: nowrap;
    }
    .nav-links a:hover{
      color: #fff;
      border-color: rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.05);
    }

    .chip-btn{
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.04);
      color: #fff;
      border-radius: 999px;
      padding: 8px 12px;
      font-weight: 900;
      font-size: 11px;
      letter-spacing: .9px;
      cursor:pointer;
      transition:.2s ease;
      user-select:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      white-space: nowrap;
    }
    .chip-btn:hover{ border-color: rgba(255,255,255,0.20); background: rgba(255,255,255,0.06); transform: translateY(-1px); }
    .chip-btn:active{ transform: translateY(0); }

    .hamburger{
      width: 40px; height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.04);
      display:none;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition:.2s ease;
      user-select:none;
    }
    .hamburger:hover{ background: rgba(255,255,255,0.06); border-color: rgba(255,255,255,0.20); }
    .hamburger .bars{ width: 16px; height: 12px; position:relative; }
    .hamburger .bars span{
      position:absolute; left:0; right:0; height:2px; border-radius:2px;
      background: rgba(244,246,255,0.85);
      transition: .2s ease;
    }
    .hamburger .bars span:nth-child(1){ top:0; }
    .hamburger .bars span:nth-child(2){ top:5px; opacity:.9; }
    .hamburger .bars span:nth-child(3){ top:10px; opacity:.8; }

    .drawer-overlay{ position:fixed; inset:0; z-index:950; background: rgba(0,0,0,0.55); display:none; }
    .drawer{
      position:fixed; top:0; right:0; height:100%; width:min(360px, 86vw);
      z-index: 960;
      transform: translateX(110%);
      transition: transform .25s ease;
      border-left: 1px solid rgba(255,255,255,0.12);
      background: rgba(10,14,22,0.72);
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      padding: 18px;
      display:flex; flex-direction:column; gap: 10px;
    }
    .drawer .row{
      display:flex; align-items:center; justify-content:space-between;
      padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.10);
      margin-bottom: 6px;
    }
    .drawer a{
      text-decoration:none;
      color: rgba(244,246,255,0.82);
      font-weight: 800;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.03);
      transition:.2s ease;
    }
    .drawer a:hover{ border-color: rgba(255,255,255,0.18); background: rgba(255,255,255,0.05); }
    .drawer small{ color: var(--muted2); }
    .drawer-open .drawer-overlay{ display:block; }
    .drawer-open .drawer{ transform: translateX(0); }

    @media (max-width: 1020px){
      .nav-links{ display:none; }
      .hamburger{ display:flex; }
      .nav{ padding: 10px 12px; }
    }

    .hero{ padding-top: 150px; padding-bottom: 40px; }
    .heroGrid{
      display:grid;
      grid-template-columns: 1.12fr 0.88fr;
      gap: 42px;
      align-items:center;
    }
    @media (max-width: 980px){
      .hero{ padding-top: 140px; }
      .heroGrid{ grid-template-columns: 1fr; text-align:center; }
    }

    .hero-tags{ display:flex; gap:10px; flex-wrap:wrap; margin: 8px 0 18px; }
    .tag{
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.04);
      color: rgba(244,246,255,0.86);
      border-radius: 999px;
      padding: 6px 12px;
      font-weight: 800;
      font-size: 11px;
      letter-spacing: .6px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      white-space: nowrap;
    }
    .tag.green{ border-color: rgba(72,187,120,0.25); background: rgba(72,187,120,0.08); }
    .tag.blue{ border-color: rgba(74,163,255,0.25); background: rgba(74,163,255,0.08); }
    .tag .dot{
      width:8px; height:8px; border-radius:99px;
      background: linear-gradient(135deg, var(--g), var(--b));
      box-shadow: 0 0 14px rgba(74,163,255,0.22);
    }

    .cta-row{ display:flex; gap:12px; margin-top: 26px; flex-wrap:wrap; }
    @media (max-width: 980px){ .cta-row{ justify-content:center; } }

    .btn{
      appearance:none; border:none; cursor:pointer;
      border-radius: 14px;
      padding: 12px 18px;
      font-weight: 900;
      letter-spacing: .6px;
      font-size: 12px;
      text-transform: uppercase;
      display:inline-flex;
      align-items:center;
      gap:10px;
      transition: .2s ease;
      user-select:none;
      white-space: nowrap;
      text-decoration:none;
    }
    .btn.primary{
      color: #06110b;
      background: linear-gradient(135deg, rgba(72,187,120,0.92), rgba(74,163,255,0.85));
      box-shadow: 0 12px 30px rgba(74,163,255,0.16);
    }
    .btn.primary:hover{ transform: translateY(-1px); filter: brightness(1.02); }
    .btn.secondary{
      color: rgba(244,246,255,0.92);
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.14);
    }
    .btn.secondary:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,0.22); background: rgba(255,255,255,0.06); }
    .btn:active{ transform: translateY(0); }

    .grid{ display:grid; grid-template-columns: repeat(3, 1fr); gap: 18px; margin-top: 30px; }
    @media (max-width: 1000px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      border-radius: var(--radius);
      background:
        radial-gradient(900px 260px at 30% 0%, rgba(255,255,255,0.05), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.03));
      border: 1px solid rgba(255,255,255,0.10);
      box-shadow: var(--shadow2);
      padding: 26px;
      position:relative;
      overflow:hidden;
      transition: transform .22s ease, border-color .22s ease, background .22s ease;
    }
    .card:hover{
      transform: translateY(-3px);
      border-color: rgba(255,255,255,0.16);
      background:
        radial-gradient(900px 260px at 30% 0%, rgba(255,255,255,0.065), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.03));
    }
    .card .icon{
      width: 46px; height: 46px;
      border-radius: 16px;
      display:flex; align-items:center; justify-content:center;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.10);
      margin-bottom: 14px;
      box-shadow: 0 0 30px rgba(74,163,255,0.11);
      font-size: 22px;
    }
    .muted{ color: var(--muted); font-size: 14px; line-height:1.78; margin:0; }
    .subtle{ color: var(--muted2); font-size: 12.5px; line-height:1.7; margin:0; }

    .split{
      display:grid;
      grid-template-columns: 1.12fr 0.88fr;
      gap: 20px;
      align-items: start;
      margin-top: 26px;
    }
    @media (max-width: 1000px){ .split{ grid-template-columns: 1fr; } }

    .list{ display:flex; flex-direction:column; gap: 12px; padding:0; margin:0; list-style:none; }
    .list li{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.035);
      padding: 18px 18px;
    }
    .list li strong{
      display:block;
      font-family: Rajdhani, sans-serif;
      font-size: 19px;
      letter-spacing:.3px;
      color:#fff;
      margin-bottom: 6px;
      font-weight: 900;
    }
    .sidecard{ position:sticky; top: 96px; }
    @media (max-width:1000px){ .sidecard{ position:relative; top:auto; } }

    .badge-row{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 14px; }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      border-radius: 999px;
      padding: 7px 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      font-size: 12px;
      font-weight: 900;
      color: rgba(244,246,255,0.92);
      letter-spacing:.2px;
      white-space: nowrap;
    }
    .badge.good{ border-color: rgba(72,187,120,0.30); background: rgba(72,187,120,0.10); color: rgba(72,187,120,0.95); }
    .badge.warn{ border-color: rgba(255,209,102,0.28); background: rgba(255,209,102,0.10); color: rgba(255,209,102,0.95); }
    .badge.bad{ border-color: rgba(255,91,122,0.30); background: rgba(255,91,122,0.10); color: rgba(255,91,122,0.95); }
    .badge .mini-dot{
      width:8px; height:8px; border-radius:999px;
      background: linear-gradient(135deg, var(--g), var(--b));
      box-shadow: 0 0 14px rgba(74,163,255,0.16);
    }

    /* Hero panel (same) */
    .panel-wrap{ width: min(460px, 92%); margin: 0 auto; position:relative; filter: drop-shadow(0 25px 65px rgba(0,0,0,0.65)); }
    .panel-sheen{
      position:absolute; inset:-20px -20px -20px -20px;
      background:
        radial-gradient(420px 220px at 25% 10%, rgba(74,163,255,0.085), transparent 60%),
        radial-gradient(380px 200px at 80% 30%, rgba(72,187,120,0.085), transparent 65%),
        radial-gradient(520px 260px at 50% 110%, rgba(255,91,122,0.065), transparent 60%);
      z-index:0; pointer-events:none; opacity:.9;
    }
    .panel{
      position:relative; z-index:1;
      aspect-ratio: 3/4.5;
      border-radius: 16px 16px 10px 10px;
      border: 10px solid rgba(154,123,108,0.95);
      background:
        radial-gradient(900px 300px at 30% 0%, rgba(255,255,255,0.05), transparent 60%),
        radial-gradient(circle at 60% 25%, rgba(74,163,255,0.075), transparent 45%),
        linear-gradient(180deg, rgba(25,28,38,0.95), rgba(13,16,24,0.98));
      overflow:hidden;
      box-shadow: var(--shadow);
    }
    .panel::before{
      content:"";
      position:absolute; left:50%; top:-44px;
      transform: translateX(-50%);
      border-left: 230px solid transparent;
      border-right: 230px solid transparent;
      border-bottom: 44px solid rgba(154,123,108,0.95);
      filter: drop-shadow(0 10px 15px rgba(0,0,0,0.35));
    }
    .panel-top{
      height: 12%;
      display:flex; align-items:center; justify-content:center;
      padding: 12px 16px;
      border-bottom: 3px solid rgba(107,79,69,0.85);
      background: linear-gradient(180deg, rgba(30,34,46,0.90), rgba(22,25,35,0.92));
      position:relative;
    }
    .lcd{
      width: 88%;
      border-radius: 12px;
      padding: 10px 14px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.58);
      display:flex; align-items:center; justify-content:space-between;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color: rgba(78,255,147,0.95);
      text-shadow: 0 0 12px rgba(78,255,147,0.18);
      font-weight: 900;
      font-size: 12px;
      letter-spacing:.3px;
    }
    .lcd b{ color: rgba(78,255,147,0.95); }
    .panel-mid{
      height: 68%;
      position:relative;
      padding: 10px 10px 0;
      display:flex;
      flex-direction:column;
      justify-content:space-evenly;
    }
    .shelf{
      position:relative; height: 8px; border-radius: 8px;
      background: rgba(107,79,69,0.92);
      box-shadow: 0 10px 18px rgba(0,0,0,0.35);
      margin: 0 8px;
    }
    .felt{
      position:absolute; left: 7%; width: 86%;
      bottom: 8px; height: 50px; border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.10);
      background:
        repeating-linear-gradient(45deg, rgba(62,39,35,0.95) 0, rgba(62,39,35,0.95) 3px, rgba(78,52,46,0.95) 3px, rgba(78,52,46,0.95) 6px);
      box-shadow: inset 0 0 18px rgba(0,0,0,0.55);
    }
    .plant-row{
      position:absolute; left: 7%; width: 86%;
      bottom: 10px; display:flex; justify-content: space-around; align-items:flex-end; z-index: 3;
    }
    .plant{ width: 40px; height: 42px; position:relative; filter: drop-shadow(0 6px 12px rgba(0,0,0,0.35)); }
    .leaf{
      position:absolute; bottom:0; width: 12px; height: 22px;
      border-radius: 0 12px 0 12px; background: rgba(72,187,120,0.95);
      transform-origin: bottom center;
    }
    .plant:nth-child(odd) .leaf{ background: rgba(88,210,126,0.95); }
    .leaf.l1{ left:4px; transform: rotate(-18deg); height: 18px; opacity:.95; }
    .leaf.l2{ left:14px; transform: rotate(0deg); height: 26px; bottom:2px; }
    .leaf.l3{ right:4px; transform: rotate(18deg); height: 18px; opacity:.92; }

    .water-strip{
      position:absolute; right: 10px; top: 0; bottom: 0; width: 4px;
      border-radius: 8px;
      background: linear-gradient(180deg, rgba(74,163,255,0.70), transparent);
      opacity: 0.42;
      animation: flowDown 2.6s linear infinite;
    }
    @keyframes flowDown{ 0%{ background-position: 0 0; } 100%{ background-position: 0 140px; } }

    .panel-bot{
      height: 20%;
      position:relative;
      border-top: 4px solid rgba(107,79,69,0.85);
      background: linear-gradient(180deg, rgba(74,163,255,0.08), rgba(74,163,255,0.16));
      overflow:hidden;
    }
    .water{
      position:absolute; left:0; right:0; bottom:0;
      height: 76%;
      background: rgba(74,163,255,0.30);
      border-top: 1px solid rgba(255,255,255,0.18);
      animation: waterLevel 6.2s ease-in-out infinite;
    }
    @keyframes waterLevel{ 0%,100%{ height: 76%; } 50%{ height: 80%; } }
    .pump{
      position:absolute; left: 12px; bottom: 10px;
      width: 64px; height: 42px;
      border-radius: 12px;
      background: rgba(0,0,0,0.55);
      border: 1px solid rgba(255,255,255,0.12);
      display:flex; align-items:center; justify-content:center;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px; font-weight: 900;
      color: rgba(244,246,255,0.68);
    }

    .solar{
      position:absolute;
      top: -18px; right: -22px;
      width: 118px; height: 74px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.16);
      background:
        radial-gradient(20px 20px at 30% 20%, rgba(255,255,255,0.18), transparent 60%),
        linear-gradient(135deg, rgba(20,33,106,0.95), rgba(34,52,160,0.90));
      box-shadow: 18px 18px 40px rgba(0,0,0,0.55);
      transform: rotate(-10deg) skewX(-4deg);
      z-index: 10;
      padding: 6px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 3px;
    }
    .cell{ border-radius: 4px; background: rgba(255,255,255,0.14); border: 1px solid rgba(255,255,255,0.10); }

    .hotspot{
      position:absolute;
      width: 28px; height: 28px;
      border-radius: 999px;
      display:flex; align-items:center; justify-content:center;
      cursor:pointer;
      z-index: 20;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.12);
      box-shadow: 0 0 0 rgba(255,255,255,0.35);
      animation: pulse 2.4s infinite;
      user-select:none;
      font-weight: 900;
      color:#fff;
      -webkit-tap-highlight-color: transparent;
    }
    .hotspot:hover{ transform: scale(1.07); }
    @keyframes pulse{
      0%{ box-shadow: 0 0 0 0 rgba(255,255,255,0.22); }
      70%{ box-shadow: 0 0 0 10px rgba(255,255,255,0); }
      100%{ box-shadow: 0 0 0 0 rgba(255,255,255,0); }
    }

    .hint{
      text-align:center;
      margin-top: 16px;
      font-size: 11px;
      letter-spacing: 1.2px;
      color: var(--muted2);
      text-transform: uppercase;
    }

    /* Modal */
    .modal-overlay{
      position:fixed; inset:0; z-index: 1200;
      background: rgba(0,0,0,0.72);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
    }
    .modal-overlay.active{ display:flex; }
    .modal{
      width: min(560px, 92vw);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,0.14);
      background:
        radial-gradient(700px 260px at 30% 0%, rgba(255,255,255,0.06), transparent 60%),
        linear-gradient(180deg, rgba(18,22,34,0.92), rgba(10,14,22,0.92));
      box-shadow: 0 28px 80px rgba(0,0,0,0.65);
      padding: 22px 20px;
      position:relative;
      transform: translateY(10px);
      animation: pop .18s ease forwards;
    }
    @keyframes pop{ to{ transform: translateY(0); } }
    .modal .x{
      position:absolute; top: 10px; right: 10px;
      width: 42px; height: 42px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.04);
      color: rgba(244,246,255,0.86);
      font-size: 22px;
      cursor:pointer;
      display:flex; align-items:center; justify-content:center;
    }
    .modal .x:hover{ background: rgba(255,255,255,0.06); border-color: rgba(255,255,255,0.20); }
    .modal .micon{
      width: 54px; height: 54px;
      border-radius: 18px;
      display:flex; align-items:center; justify-content:center;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.12);
      font-size: 26px;
      margin-bottom: 10px;
      box-shadow: 0 0 30px rgba(74,163,255,0.10);
    }
    .modal .mtitle{
      font-family: Rajdhani, sans-serif;
      font-weight: 900;
      font-size: 26px;
      color: #fff;
      margin-bottom: 10px;
      letter-spacing:.3px;
    }
    .modal .mdesc{
      margin:0;
      color: var(--muted);
      line-height: 1.75;
      font-size: 14.5px;
    }

    /* Tables */
    .table-wrap{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.22);
      overflow:auto;
    }
    table{ border-collapse: collapse; width: 100%; min-width: 720px; }
    th, td{
      padding: 14px 14px;
      border-bottom: 1px solid rgba(255,255,255,0.07);
      font-size: 13px;
      color: var(--muted);
      vertical-align: top;
    }
    th{
      position:sticky; top:0;
      background: rgba(255,255,255,0.05);
      color:#fff;
      font-family: Rajdhani, sans-serif;
      letter-spacing:.3px;
      font-size: 15px;
      z-index: 2;
      font-weight: 900;
    }
    @media (max-width: 520px){ th,td{ font-size: 12.5px; } }

    /* Pilot */
    .pilot-grid{
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 18px;
      margin-top: 26px;
      align-items:start;
    }
    @media (max-width: 1000px){ .pilot-grid{ grid-template-columns: 1fr; } }

    .chart-box{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.28);
      height: 280px;
      position:relative;
      overflow:hidden;
    }
    .chart-box canvas{ position:absolute; inset:0; width:100%; height:100%; }

    .legend{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      margin-top: 10px;
      color: var(--muted2);
      font-size: 12px;
      font-weight: 800;
      letter-spacing:.2px;
    }
    .leg-item{ display:inline-flex; align-items:center; gap:8px; }
    .swatch{
      width: 18px; height: 10px; border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.08);
    }
    .swatch.control{ background: rgba(255,91,122,0.85); }
    .swatch.active{ background: rgba(72,187,120,0.85); }
    .swatch.threshold{ background: rgba(255,209,102,0.85); }

    .form-grid{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px; }
    @media (max-width: 540px){ .form-grid{ grid-template-columns: 1fr; } }

    .field{ display:flex; flex-direction:column; gap:6px; }
    .field label{
      font-size: 11px;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      color: var(--muted2);
      font-weight: 900;
    }
    .field input{
      width:100%;
      border-radius: 14px;
      padding: 12px 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.03);
      color: #fff;
      font-weight: 800;
      outline:none;
      transition:.2s ease;
    }
    .field input:focus{
      border-color: rgba(74,163,255,0.35);
      box-shadow: 0 0 0 4px rgba(74,163,255,0.12);
    }
    .pilot-actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 12px; }

    .mini-btn{
      appearance:none;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.04);
      color: rgba(244,246,255,0.92);
      border-radius: 14px;
      padding: 11px 14px;
      font-weight: 900;
      font-size: 12px;
      letter-spacing:.6px;
      text-transform: uppercase;
      cursor:pointer;
      transition:.2s ease;
      user-select:none;
      white-space: nowrap;
    }
    .mini-btn:hover{ background: rgba(255,255,255,0.06); border-color: rgba(255,255,255,0.20); transform: translateY(-1px); }
    .mini-btn:active{ transform: translateY(0); }
    .mini-btn.primary{
      border-color: rgba(72,187,120,0.22);
      background: rgba(72,187,120,0.12);
      color: rgba(72,187,120,0.95);
    }
    .mini-btn.danger{
      border-color: rgba(255,91,122,0.26);
      background: rgba(255,91,122,0.10);
      color: rgba(255,91,122,0.95);
    }
    .helpbox{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.22);
      padding: 16px;
      margin-top: 12px;
    }
    .helpbox b{
      color:#fff;
      font-weight: 900;
      font-family: Rajdhani, sans-serif;
      letter-spacing:.2px;
    }
    .helpbox ul{
      margin: 10px 0 0;
      padding-left: 18px;
      color: var(--muted);
      line-height:1.7;
      font-size: 13.5px;
    }

    /* Compare */
    .compare-card{ padding: 0; overflow:hidden; }
    .compare-head{
      padding: 22px 22px 16px;
      display:flex;
      align-items:flex-end;
      justify-content: space-between;
      gap: 14px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      background:
        radial-gradient(900px 280px at 20% 0%, rgba(74,163,255,0.075), transparent 60%),
        radial-gradient(700px 220px at 80% 0%, rgba(72,187,120,0.065), transparent 60%),
        rgba(255,255,255,0.02);
    }
    .compare-head .title{
      font-family: Rajdhani, sans-serif;
      font-weight: 900;
      font-size: 22px;
      letter-spacing:.3px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border-radius: 999px;
      padding: 8px 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.20);
      color: rgba(244,246,255,0.85);
      font-weight: 900;
      font-size: 12px;
      letter-spacing:.3px;
      white-space: nowrap;
    }
    .pill .spark{
      width: 9px; height: 9px; border-radius: 999px;
      background: linear-gradient(135deg, var(--g), var(--b));
      box-shadow: 0 0 16px rgba(74,163,255,0.14);
    }
    .compare-body{ padding: 18px 22px 22px; }

    /* DASH */
    .dash{
      display:grid;
      grid-template-columns: 1.55fr 0.95fr;
      gap: 16px;
      margin-top: 18px;
    }
    @media (max-width: 980px){ .dash{ grid-template-columns:1fr; } }

    .kpi-row{ display:grid; grid-template-columns: repeat(3,1fr); gap: 12px; margin-bottom: 14px; }
    @media (max-width: 520px){ .kpi-row{ grid-template-columns:1fr; } }
    .kpi{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.22);
      padding: 14px 14px;
      text-align:center;
    }
    .kpi .val{
      font-family: Rajdhani, sans-serif;
      font-weight: 900;
      font-size: 32px;
      letter-spacing:.3px;
    }
    .kpi .lbl{
      margin-top: 4px;
      font-size: 11px;
      letter-spacing: 1.4px;
      text-transform: uppercase;
      color: var(--muted2);
      font-weight: 900;
    }

    .chart-mini{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.28);
      height: 200px;
      position:relative;
      overflow:hidden;
    }
    .chart-mini canvas{ position:absolute; inset:0; width:100%; height:100%; }

    .status{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border-radius: 999px;
      padding: 8px 12px;
      border: 1px solid rgba(72,187,120,0.22);
      background: rgba(72,187,120,0.10);
      color: rgba(72,187,120,0.95);
      font-weight: 900;
      font-size: 12px;
      letter-spacing:.3px;
      white-space: nowrap;
    }
    .status .dot{
      width: 8px; height: 8px; border-radius: 999px;
      background: rgba(72,187,120,0.95);
      box-shadow: 0 0 16px rgba(72,187,120,0.20);
    }

    .console{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.55);
      padding: 14px;
      height: 170px;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      justify-content:flex-end;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      color: rgba(78,255,147,0.92);
    }
    .logline{
      padding: 7px 0;
      border-bottom: 1px dashed rgba(255,255,255,0.06);
      opacity: .92;
      white-space: pre-wrap;
    }

    /* Control Deck */
    .deck{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.10);
      background: radial-gradient(600px 220px at 30% 0%, rgba(255,255,255,0.05), transparent 60%),
                  rgba(0,0,0,0.32);
      padding: 14px;
    }
    .deck-top{
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
      margin-bottom: 10px;
    }
    .deck-title{
      font-family: Rajdhani, sans-serif;
      font-weight: 900;
      letter-spacing:.3px;
      font-size: 18px;
    }
    .led{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.62);
      padding: 12px 12px;
      box-shadow: inset 0 0 22px rgba(0,0,0,0.55);
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .ledcell{
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.03);
      padding: 10px 10px;
    }
    .ledlabel{
      font-size: 10px;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: rgba(244,246,255,0.50);
      font-weight: 900;
      margin-bottom: 6px;
    }
    .ledvalue{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-weight: 900;
      letter-spacing:.6px;
      color: rgba(78,255,147,0.95);
      text-shadow: 0 0 12px rgba(78,255,147,0.18);
      font-size: 16px;
    }
    .ledvalue.warn{ color: rgba(255,209,102,0.95); text-shadow: 0 0 12px rgba(255,209,102,0.16); }
    .ledvalue.bad{ color: rgba(255,91,122,0.95); text-shadow: 0 0 12px rgba(255,91,122,0.16); }

    /* NEW: Auto/Manual + slider UI */
    .controlbar{
      width:100%;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.24);
      padding: 12px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      margin-top: 12px;
    }
    .controlrow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      flex-wrap:wrap;
    }
    .ctl-label{
      font-size: 11px;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      color: var(--muted2);
      font-weight: 900;
    }
    .switch{
      display:inline-flex; align-items:center; gap:10px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      user-select:none;
    }
    .switch input{ display:none; }
    .track{
      width: 44px; height: 24px;
      border-radius: 999px;
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.12);
      position:relative;
      cursor:pointer;
    }
    .thumb{
      width: 18px; height: 18px; border-radius: 999px;
      background: rgba(244,246,255,0.90);
      position:absolute;
      top: 50%;
      left: 3px;
      transform: translateY(-50%);
      transition: .18s ease;
    }
    .switch input:checked + .track{
      background: rgba(72,187,120,0.22);
      border-color: rgba(72,187,120,0.28);
    }
    .switch input:checked + .track .thumb{ left: 23px; }

    .slider{
      width: min(360px, 100%);
      display:flex;
      align-items:center;
      gap:10px;
    }
    .slider input[type="range"]{
      width: 100%;
      accent-color: var(--b);
    }
    .slider .val{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-weight: 900;
      color: rgba(244,246,255,0.92);
      min-width: 88px;
      text-align:right;
    }
    .manual-buttons{ display:flex; gap:10px; flex-wrap:wrap; }
    .manual-buttons .mini-btn{ padding: 10px 12px; }

    footer{
      padding: 46px 0 70px;
      border-top: 1px solid rgba(255,255,255,0.08);
      color: var(--muted2);
      font-size: 12px;
      text-align:center;
      position:relative;
      z-index:2;
    }

    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; scroll-behavior: auto !important; }
    }
  </style>
</head>

<body>
  <canvas id="air"></canvas>
  <div class="grain"></div>
  <div class="progress"><span id="prog"></span></div>

  <div class="drawer-overlay" id="drawerOverlay"></div>
  <div class="drawer" id="drawer">
    <div class="row">
      <div style="display:flex; align-items:center; gap:10px;">
        <div class="brand-badge"></div>
        <div>
          <div class="brand-name">Bƒ∞YO<span>DUVAR</span></div>
          <small id="drawerSub">Men√º</small>
        </div>
      </div>
      <button class="chip-btn" id="drawerClose" type="button">Kapat</button>
    </div>

    <a href="#safety" class="drawerLink">G√ºvenlik</a>
    <a href="#tech" class="drawerLink">Sistem</a>
    <a href="#pilot" class="drawerLink">Pilot Test</a>
    <a href="#compare" class="drawerLink">Kar≈üƒ±la≈ütƒ±rma</a>
    <a href="#demo" class="drawerLink">Canlƒ± Panel</a>
    <a href="#team" class="drawerLink">Ekip</a>

    <div style="margin-top:auto; display:flex; gap:10px; flex-wrap:wrap;">
      <button class="chip-btn" id="langToggle2" type="button">TR | EN</button>
      <button class="chip-btn" id="jumpTop" type="button">Yukarƒ±</button>
    </div>
  </div>

  <nav class="nav" aria-label="√úst Men√º">
    <div class="brand" id="brandHome" title="Ana sayfa">
      <div class="brand-badge"></div>
      <div class="brand-name" id="brandText">Bƒ∞YO<span>DUVAR</span></div>
    </div>

    <div class="nav-actions">
      <div class="nav-links" aria-label="Sayfa linkleri">
        <a href="#safety">G√ºvenlik</a>
        <a href="#tech">Sistem</a>
        <a href="#pilot">Pilot Test</a>
        <a href="#compare">Kar≈üƒ±la≈ütƒ±rma</a>
        <a href="#demo">Canlƒ± Panel</a>
        <a href="#team">Ekip</a>
      </div>
      <button class="chip-btn" id="langToggle" type="button">TR | EN</button>
      <button class="hamburger" id="hamburger" type="button" aria-label="Men√ºy√º a√ß">
        <div class="bars" aria-hidden="true">
          <span></span><span></span><span></span>
        </div>
      </button>
    </div>
  </nav>

  <div class="modal-overlay" id="modalOverlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <button class="x" type="button" id="modalClose" aria-label="Kapat">√ó</button>
      <div class="micon" id="mIcon">üì°</div>
      <div class="mtitle" id="mTitle">Ba≈ülƒ±k</div>
      <p class="mdesc" id="mDesc">A√ßƒ±klama</p>
    </div>
  </div>

  <main>
    <!-- HERO -->
    <section class="container hero" id="home" data-accent="b">
      <div class="heroGrid">
        <div>
          <div class="hero-tags">
            <span class="tag green"><span class="dot"></span>√ñzel ƒ∞ngiliz K√ºlt√ºr Koleji</span></span>
            <span class="tag blue"><span class="dot"></span>ƒ∞nsanlƒ±k Yararƒ±na Teknoloji ‚Ä¢ 2026</span></span>
          </div>

          <div class="kicker">SENSOR ‚Ä¢ BITKI ‚Ä¢ AKTIF FILTRELEME</div>

          <h1>Duvarlar Artƒ±k<br><span style="color:var(--g)">Nefes Alƒ±yor</span></h1>

          <p class="lead">
            Bƒ∞YODUVAR; sƒ±nƒ±f ve ofis gibi kapalƒ± alanlarda CO‚ÇÇ ve hava kalitesi takibini yapan, e≈üik a≈üƒ±ldƒ±ƒüƒ±nda hava akƒ±≈üƒ±nƒ± bitki k√∂k b√∂lgesine y√∂nlendirerek
            ‚Äúaktif‚Äù iyile≈ütirme saƒülayan akƒ±llƒ± bir duvar mod√ºl√ºd√ºr.
          </p>

          <div class="cta-row">
            <a class="btn primary" href="#pilot"><span>‚ö°</span><span>Pilot Testi A√ß</span></a>
            <a class="btn secondary" href="#demo"><span>üìà</span><span>Canlƒ± Panel</span></a>
          </div>

          <div class="badge-row" style="margin-top:16px;">
            <span class="badge"><span class="mini-dot"></span>D√º≈ü√ºk voltaj ‚Ä¢ okul uyumlu</span></span>
            <span class="badge"><span class="mini-dot"></span>Topraksƒ±z ‚Ä¢ d√º≈ü√ºk koku riski</span></span>
            <span class="badge"><span class="mini-dot"></span>Veri odaklƒ± KPI</span></span>
          </div>
        </div>

        <div>
          <div class="panel-wrap">
            <div class="panel-sheen"></div>

            <div class="solar" aria-hidden="true">
              <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
              <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
              <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
              <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
              <div class="hotspot" style="top:-10px; right:-10px;" data-open="solar">+</div>
            </div>

            <div class="panel">
              <div class="hotspot" style="top:-58px; left:50%; transform:translateX(-50%);" data-open="cleanair">+</div>

              <div class="panel-top">
                <div class="hotspot" style="top:-10px; left:10px;" data-open="sensors">+</div>
                <div class="lcd">
                  <span><b>CO‚ÇÇ</b> <span id="lcdStatus">ƒ∞Yƒ∞</span></span>
                  <span><span id="lcdPpm">410</span> ppm</span>
                </div>
              </div>

              <div class="panel-mid">
                <div class="hotspot" style="top:32%; left:50%; transform:translate(-50%,-50%);" data-open="plants">+</div>
                <div class="hotspot" style="top:78%; right:6%; transform:translateY(-50%); width:26px; height:26px;" data-open="felt">+</div>
                <div class="hotspot" style="top:78%; left:-8px; transform:translateY(-50%); width:26px; height:26px;" data-open="fan">+</div>
                <div class="water-strip" aria-hidden="true"></div>

                <div class="shelf"><div class="felt"></div><div class="plant-row" id="row1"></div></div>
                <div class="shelf"><div class="felt"></div><div class="plant-row" id="row2"></div></div>
                <div class="shelf"><div class="felt"></div><div class="plant-row" id="row3"></div></div>
              </div>

              <div class="panel-bot">
                <div class="hotspot" style="top:10px; right:10px;" data-open="water">+</div>
                <div class="water"></div>
                <div class="pump">5V<br>pump</div>
              </div>
            </div>

            <div class="hint">Detaylar i√ßin (+) noktalarƒ±na tƒ±klayƒ±n</div>
          </div>
        </div>
      </div>
    </section>

    <!-- SAFETY -->
    <section class="container" id="safety" data-accent="g">
      <div class="kicker">G√úVENLƒ∞ TASARIM</div>
      <h2>Sƒ±nƒ±f ƒ∞√ßin Uygun Mimari</h2>
      <p class="lead">Topraksƒ±z sistem, kapalƒ± su d√∂ng√ºs√º ve d√º≈ü√ºk voltaj yakla≈üƒ±mƒ± ile kullanƒ±m g√ºvenliƒüi hedeflenir.</p>

      <div class="grid">
        <div class="card">
          <div class="icon">üõ°Ô∏è</div>
          <h3>5V D√º≈ü√ºk Voltaj</h3>
          <p class="muted">T√ºm bile≈üenler USB seviyesinde √ßalƒ±≈üƒ±r. Elektriksel riskleri azaltmak i√ßin yalƒ±tƒ±m ve kablo y√∂netimi uygulanƒ±r.</p>
        </div>
        <div class="card">
          <div class="icon">üö´</div>
          <h3>Topraksƒ±z (Ke√ße) Katman</h3>
          <p class="muted">Hidroponik ke√ße, toprak kaynaklƒ± kir ve ta≈üƒ±ma risklerini azaltƒ±r. D√ºzenli bakƒ±m ile koku ve birikim kontrol edilir.</p>
        </div>
        <div class="card">
          <div class="icon">üíß</div>
          <h3>Kapalƒ± Su D√∂ng√ºs√º</h3>
          <p class="muted">Su haznesi kapalƒ± sistemdir. Sƒ±zdƒ±rmaz baƒülantƒ±lar ve ta≈üma payƒ± ile kontroll√º kullanƒ±m hedeflenir.</p>
        </div>
      </div>
    </section>

    <!-- TECH -->
    <section class="container" id="tech" data-accent="b">
      <div class="kicker">Sƒ∞STEM Mƒ∞MARƒ∞Sƒ∞</div>
      <h2>Sens√∂r + Fan + Rizosfer</h2>
      <p class="lead">CO‚ÇÇ ve hava kalitesi verisi, e≈üik durumlarƒ±nda hava akƒ±≈üƒ±nƒ± y√∂netmek i√ßin kullanƒ±lƒ±r. Hava, bitki k√∂k b√∂lgesine y√∂nlendirilerek ‚Äúaktif‚Äù etki hedeflenir.</p>

      <div class="split">
        <div>
          <ul class="list">
            <li><strong>NDIR CO‚ÇÇ + IAQ Sens√∂r√º</strong><div class="muted">CO‚ÇÇ ppm √∂l√ß√ºm√º i√ßin NDIR sens√∂r; genel hava kalitesi i√ßin IAQ/VOC sens√∂r√ºyle desteklenir.</div></li>
            <li><strong>Otomasyon Mantƒ±ƒüƒ±</strong><div class="muted">E≈üik a≈üƒ±ldƒ±ƒüƒ±nda fanlar devreye girer; hava akƒ±≈üƒ± k√∂k b√∂lgesine zorlanƒ±r. Log ve grafik ile s√ºre√ß izlenir.</div></li>
            <li><strong>Enerji Se√ßenekleri</strong><div class="muted">USB/Adapt√∂r + batarya senaryolarƒ±na uygun yapƒ±. G√ºne≈ü paneli destekli kullanƒ±m kurgulanabilir.</div></li>
          </ul>
        </div>

        <div class="card sidecard">
          <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
            <div>
              <h3 style="margin-bottom:6px;">Etki Mantƒ±ƒüƒ±</h3>
              <p class="muted">Aktif hava akƒ±≈üƒ± ile k√∂k b√∂lgesindeki biyolojik filtreleme (rizosfer) alanƒ±nƒ±n etkinliƒüi artƒ±rƒ±lƒ±r.</p>
            </div>
            <span class="status" id="sysBadge"><span class="dot"></span>AKTƒ∞F</span>
          </div>

          <div class="badge-row" style="margin-top:14px;">
            <span class="badge good" id="kpiTarget">KPI: %20+</span>
            <span class="badge warn" id="co2ThresholdLbl">E≈üik: 800 ppm</span>
            <span class="badge" id="modeLbl"><span class="mini-dot"></span>Auto</span>
          </div>

          <div class="subtle" style="margin-top:14px;">
            Not: Deƒüerler ortama g√∂re deƒüi≈üir. Pilot test ekranƒ±ndaki giri≈ülerle anlƒ±k sonu√ß g√∂rebilirsiniz.
          </div>
        </div>
      </div>
    </section>

    <!-- PILOT -->
    <section class="container" id="pilot" data-accent="g">
      <div class="kicker">Pƒ∞LOT TEST</div>
      <h2>Deƒüerleri Girin ‚Ä¢ Anlƒ±k KPI G√∂r√ºn</h2>
      <p class="lead">A≈üaƒüƒ±daki alanlara kontrol g√ºn√º ve Bƒ∞YODUVAR aktifken √∂l√ßt√ºƒü√ºn√ºz CO‚ÇÇ deƒüerlerini girin. Grafik, tablo ve iyile≈üme y√ºzdesi otomatik hesaplanƒ±r.</p>

      <div class="pilot-grid">
        <div class="card">
          <div style="display:flex; align-items:flex-end; justify-content:space-between; gap:12px; flex-wrap:wrap;">
            <h3>CO‚ÇÇ Zaman Grafiƒüi</h3>
            <div class="badge-row" style="margin-top:0;">
              <span class="badge bad" id="bControl">Kontrol: +0 ppm</span>
              <span class="badge good" id="bActive">Aktif: +0 ppm</span>
              <span class="badge" id="bImprove"><span class="mini-dot"></span>KPI: %0</span>
            </div>
          </div>

          <div class="legend">
            <span class="leg-item"><span class="swatch control"></span>Kontrol (Bƒ∞YODUVAR kapalƒ±)</span>
            <span class="leg-item"><span class="swatch active"></span>Aktif (Bƒ∞YODUVAR a√ßƒ±k)</span>
            <span class="leg-item"><span class="swatch threshold"></span>E≈üik (ppm)</span>
          </div>

          <div class="chart-box" style="margin-top:10px;">
            <canvas id="pilotChart"></canvas>
          </div>

          <div class="helpbox">
            <b>Ne gireceƒüim?</b>
            <ul>
              <li><b>Zaman (dk)</b>: √ñl√ß√ºm aldƒ±ƒüƒ±n dakika (√∂rn: 0, 20, 40).</li>
              <li><b>Kontrol (ppm)</b>: Aynƒ± sƒ±nƒ±fta, Bƒ∞YODUVAR kapalƒ±yken √∂l√ßt√ºƒü√ºn CO‚ÇÇ.</li>
              <li><b>Aktif (ppm)</b>: Aynƒ± ko≈üulda, Bƒ∞YODUVAR a√ßƒ±kken √∂l√ßt√ºƒü√ºn CO‚ÇÇ.</li>
              <li><b>E≈üik (ppm)</b>: Alarm/√ßalƒ±≈üma e≈üiƒüi (√∂rn: 800).</li>
            </ul>
          </div>

          <div class="form-grid">
            <div class="field"><label>Zaman 0 (dk)</label><input id="t0" type="number" inputmode="numeric" min="0" value="0" /></div>
            <div class="field"><label>Zaman 1 (dk)</label><input id="t1" type="number" inputmode="numeric" min="1" value="20" /></div>
            <div class="field"><label>Zaman 2 (dk)</label><input id="t2" type="number" inputmode="numeric" min="1" value="40" /></div>
            <div class="field"><label>CO‚ÇÇ E≈üik (ppm)</label><input id="thr" type="number" inputmode="numeric" min="400" value="800" /></div>
          </div>

          <div class="form-grid" style="margin-top:12px;">
            <div class="field"><label>Kontrol ‚Ä¢ t0 (ppm)</label><input id="c0" type="number" inputmode="numeric" min="350" value="520" /></div>
            <div class="field"><label>Kontrol ‚Ä¢ t1 (ppm)</label><input id="c1" type="number" inputmode="numeric" min="350" value="980" /></div>
            <div class="field"><label>Kontrol ‚Ä¢ t2 (ppm)</label><input id="c2" type="number" inputmode="numeric" min="350" value="1400" /></div>
            <div class="field"><label>Aktif ‚Ä¢ t0 (ppm)</label><input id="a0" type="number" inputmode="numeric" min="350" value="520" /></div>
            <div class="field"><label>Aktif ‚Ä¢ t1 (ppm)</label><input id="a1" type="number" inputmode="numeric" min="350" value="780" /></div>
            <div class="field"><label>Aktif ‚Ä¢ t2 (ppm)</label><input id="a2" type="number" inputmode="numeric" min="350" value="980" /></div>
          </div>

          <div class="pilot-actions">
            <button class="mini-btn primary" id="savePilot" type="button">Kaydet</button>
            <button class="mini-btn" id="resetPilot" type="button">Varsayƒ±lan</button>
            <button class="mini-btn" id="copyPilot" type="button">√ñzet Metni</button>
          </div>

          <div class="subtle" id="pilotSummary" style="margin-top:12px;"></div>
        </div>

        <div class="card">
          <h3>√ñl√ß√ºm Tablosu</h3>
          <div class="table-wrap" style="margin-top:10px;">
            <table>
              <thead>
                <tr>
                  <th>Zaman</th>
                  <th>Kontrol (ppm)</th>
                  <th>Aktif (ppm)</th>
                  <th>Fark (Kontrol - Aktif)</th>
                </tr>
              </thead>
              <tbody id="pilotTbody"></tbody>
            </table>
          </div>

          <div class="badge-row">
            <span class="badge" id="endDiff"><span class="mini-dot"></span>t2 farkƒ±: 0 ppm</span>
            <span class="badge warn" id="overThreshold">E≈üik √ºst√º nokta sayƒ±sƒ±: 0</span>
          </div>

          <p class="subtle" style="margin-top:10px;">
            ƒ∞pucu: ‚ÄúKontrol‚Äù ve ‚ÄúAktif‚Äù deƒüerlerini aynƒ± ders senaryosunda (benzer √∂ƒürenci sayƒ±sƒ±/kapƒ±-pencere durumu) alƒ±n.
          </p>
        </div>
      </div>
    </section>

    <!-- COMPARISON -->
    <section class="container" id="compare" data-accent="b">
      <div class="kicker">KAR≈ûILA≈ûTIRMA</div>
      <h2>Alternatiflere G√∂re Bƒ∞YODUVAR</h2>
      <p class="lead">Piyasadaki farklƒ± yakla≈üƒ±mlarla aynƒ± kriterlerde kƒ±yas: √∂l√ß√ºm, aktif iyile≈ütirme, sarf/atƒ±k ve eƒüitim etkisi.</p>

      <div class="card compare-card" style="margin-top:20px;">
        <div class="compare-head">
          <div>
            <div class="title">Kar≈üƒ±la≈ütƒ±rma Matrisi</div>
            <div class="subtle">√ñrnek marka referanslarƒ±: Dyson, Philips, Xiaomi, IQAir vb.</div>
          </div>
          <span class="pill"><span class="spark"></span>Okul Odaklƒ± ‚Ä¢ Veri Odaklƒ±</span>
        </div>

        <div class="compare-body">
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>√á√∂z√ºm</th>
                  <th>√ñl√ß√ºm</th>
                  <th>Aktif ƒ∞yile≈ütirme</th>
                  <th>Sarf/Atƒ±k</th>
                  <th>Bakƒ±m</th>
                  <th>Eƒüitim Etkisi</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><b style="color:#fff;">CO‚ÇÇ Monit√∂r√º</b> <span class="subtle">(Aranet, Qingping vb.)</span></td>
                  <td>‚úÖ CO‚ÇÇ</td>
                  <td>‚ùå</td>
                  <td>‚úÖ (yok)</td>
                  <td>D√º≈ü√ºk</td>
                  <td>Orta</td>
                </tr>
                <tr>
                  <td><b style="color:#fff;">Hava Temizleyici</b> <span class="subtle">(Dyson, Philips, Xiaomi, IQAir‚Ä¶)</span></td>
                  <td>‚ö†Ô∏è kƒ±smi</td>
                  <td>‚úÖ</td>
                  <td>‚ö†Ô∏è filtre sarfƒ±</td>
                  <td>Orta</td>
                  <td>D√º≈ü√ºk</td>
                </tr>
                <tr>
                  <td><b style="color:#fff;">Havalandƒ±rma / Pencere</b></td>
                  <td>‚ùå</td>
                  <td>‚úÖ</td>
                  <td>‚úÖ (yok)</td>
                  <td>D√º≈ü√ºk</td>
                  <td>Orta</td>
                </tr>
                <tr>
                  <td><b style="color:var(--g)">Bƒ∞YODUVAR</b> <span class="subtle">(sens√∂r + fan + rizosfer)</span></td>
                  <td>‚úÖ CO‚ÇÇ + IAQ</td>
                  <td>‚úÖ kontroll√º akƒ±≈ü</td>
                  <td>‚úÖ d√º≈ü√ºk atƒ±k</td>
                  <td>Planlƒ± / d√º≈ü√ºk</td>
                  <td>‚úÖ Y√ºksek</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="badge-row">
            <span class="badge good"><span class="mini-dot"></span>√ñl√ß + ƒ∞yile≈ütir</span>
            <span class="badge"><span class="mini-dot"></span>Sƒ±nƒ±f i√ßi g√∂r√ºn√ºr s√ºre√ß</span>
            <span class="badge warn"><span class="mini-dot"></span>KPI ile raporlanabilir</span>
          </div>
        </div>
      </div>
    </section>

    <!-- LIVE DASH -->
    <section class="container" id="demo" data-accent="r">
      <div class="kicker">CANLI PANEL</div>
      <h2>Anlƒ±k Sim√ºlasyon</h2>
      <p class="lead">Demo ama√ßlƒ±: CO‚ÇÇ y√ºkseldiƒüinde sistem ‚Äútemizleme‚Äù moduna ge√ßer ve deƒüerleri yumu≈üak√ßa d√º≈ü√ºr√ºr. Auto/Manual ve e≈üik slider ile kontrol edebilirsiniz.</p>

      <div class="card" style="margin-top:18px;">
        <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;">
          <h3 style="margin-bottom:0;">Bƒ∞YODUVAR ‚Ä¢ Control Deck</h3>
          <span class="status" id="statusPill"><span class="dot"></span>Sƒ∞STEM AKTƒ∞F</span>
        </div>

        <div class="dash">
          <div>
            <div class="kpi-row">
              <div class="kpi">
                <div class="val" id="valCo2">410</div>
                <div class="lbl">CO‚ÇÇ (ppm)</div>
              </div>
              <div class="kpi">
                <div class="val" id="valTemp">24¬∞C</div>
                <div class="lbl">Sƒ±caklƒ±k</div>
              </div>
              <div class="kpi">
                <div class="val" id="valHum">55%</div>
                <div class="lbl">Nem</div>
              </div>
            </div>

            <div class="chart-mini">
              <canvas id="dashChart"></canvas>
            </div>

            <div class="badge-row">
              <span class="badge" id="fanBadge"><span class="mini-dot"></span>Fan: beklemede</span>
              <span class="badge warn" id="dashThr">E≈üik: 800 ppm</span>
              <span class="badge" id="modeBadge"><span class="mini-dot"></span>Mod: Normal</span>
            </div>
          </div>

          <div style="display:flex; flex-direction:column; gap:12px;">
            <div class="deck">
              <div class="deck-top">
                <div class="deck-title">LED Kontrol Paneli</div>
                <span class="badge" id="deckClock"><span class="mini-dot"></span>t: 00:00</span>
              </div>

              <div class="led">
                <div class="ledcell">
                  <div class="ledlabel">CO‚ÇÇ STATUS</div>
                  <div class="ledvalue" id="ledStatus">GOOD</div>
                </div>
                <div class="ledcell">
                  <div class="ledlabel">MODE</div>
                  <div class="ledvalue warn" id="ledMode">NORMAL</div>
                </div>
                <div class="ledcell">
                  <div class="ledlabel">FAN</div>
                  <div class="ledvalue" id="ledFan">STANDBY</div>
                </div>
                <div class="ledcell">
                  <div class="ledlabel">PUMP</div>
                  <div class="ledvalue" id="ledPump">IDLE</div>
                </div>
              </div>

              <!-- NEW controls -->
              <div class="controlbar" aria-label="Demo kontrol paneli">
                <div class="controlrow">
                  <div>
                    <div class="ctl-label">Kontrol Modu</div>
                    <div class="subtle" style="margin-top:4px;">Auto: e≈üik √ºst√ºnde temizler ‚Ä¢ Manual: siz a√ß/kapat</div>
                  </div>

                  <label class="switch" title="Auto / Manual">
                    <span class="ctl-label" id="modeText">AUTO</span>
                    <input id="autoToggle" type="checkbox" checked />
                    <span class="track"><span class="thumb"></span></span>
                  </label>
                </div>

                <div class="controlrow">
                  <div>
                    <div class="ctl-label">CO‚ÇÇ E≈üik Ayarƒ±</div>
                    <div class="subtle" style="margin-top:4px;">Demo e≈üiƒüi: sistemin devreye girdiƒüi seviye</div>
                  </div>

                  <div class="slider">
                    <input id="thrSlider" type="range" min="600" max="1400" step="10" value="800" />
                    <div class="val" id="thrVal">800 ppm</div>
                  </div>
                </div>

                <div class="controlrow">
                  <div>
                    <div class="ctl-label">Manual Kontroller</div>
                    <div class="subtle" style="margin-top:4px;">Manual modda aktifle≈üir</div>
                  </div>

                  <div class="manual-buttons">
                    <button class="mini-btn" id="fanToggleBtn" type="button">Fan: OFF</button>
                    <button class="mini-btn" id="pumpToggleBtn" type="button">Pump: OFF</button>
                    <button class="mini-btn danger" id="panicBtn" type="button">Reset</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="console" id="console">
              <div class="logline">> System boot‚Ä¶</div>
              <div class="logline">> Sensors online.</div>
              <div class="logline">> Waiting for scenario.</div>
            </div>

            <button class="btn secondary" id="scenarioBtn" type="button" style="justify-content:center;">
              ‚ö° Sƒ±nƒ±f Kalabalƒ±kla≈üƒ±nca
            </button>

            <div class="subtle">
              Not: Bu sim√ºlasyon ‚Äúhissiyat‚Äù ama√ßlƒ±dƒ±r. Ger√ßek KPI i√ßin Pilot b√∂l√ºm√ºne kendi √∂l√ß√ºmlerinizi girin.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- TEAM -->
    <section class="container" id="team" data-accent="b">
      <div class="kicker">EKƒ∞P</div>
      <h2>Bilim Ka≈üifleri</h2>
      <p class="lead">Proje geli≈ütirme, tasarƒ±m, √ºretim ve sunum s√ºre√ßleri ekip i√ßinde payla≈üƒ±lmƒ±≈ütƒ±r.</p>

      <div class="grid" style="margin-top:20px;">
        <div class="card"><div class="icon">üß≠</div><h3>Kaptan</h3><p class="muted">R√ºzgar √ñzmen</p></div>
        <div class="card"><div class="icon">üéõÔ∏è</div><h3>Tasarƒ±m</h3><p class="muted">Poyraz Bulut</p></div>
        <div class="card"><div class="icon">üß†</div><h3>Proje Fikri</h3><p class="muted">Archer Ege Webb</p></div>
      </div>

      <div class="grid">
        <div class="card"><div class="icon">üß™</div><h3>Sunum</h3><p class="muted">Toprak Tekin</p></div>
        <div class="card"><div class="icon">üß©</div><h3>√úretim</h3><p class="muted">Volkan √ñnsay</p></div>
        <div class="card"><div class="icon">üéì</div><h3>Danƒ±≈üman</h3><p class="muted">Gamze Yayla√∂n√º</p></div>
      </div>
    </section>

    <footer>
      <div>¬© 2026 Bƒ∞YODUVAR ‚Ä¢ Bilim Ka≈üifleri</div>
      <div style="margin-top:8px;">Opera ‚Ä¢ Chrome ‚Ä¢ Safari uyumlu ‚Ä¢ Mobil/Tablet/PC responsive</div>
    </footer>
  </main>

  <script>
    /* =========================
       Drawer
    ========================== */
    const overlay = document.getElementById("drawerOverlay");
    const hamburger = document.getElementById("hamburger");
    const drawerClose = document.getElementById("drawerClose");
    const jumpTop = document.getElementById("jumpTop");

    function openDrawer(){
      document.documentElement.classList.add("drawer-open");
      document.body.classList.add("drawer-open");
    }
    function closeDrawer(){
      document.documentElement.classList.remove("drawer-open");
      document.body.classList.remove("drawer-open");
    }
    hamburger.addEventListener("click", openDrawer);
    overlay.addEventListener("click", closeDrawer);
    drawerClose.addEventListener("click", closeDrawer);
    jumpTop.addEventListener("click", ()=> { closeDrawer(); window.scrollTo({top:0, behavior:"smooth"}); });

    document.querySelectorAll(".drawerLink").forEach(a=>{
      a.addEventListener("click", ()=> closeDrawer());
    });
    document.getElementById("brandHome").addEventListener("click", ()=> window.scrollTo({top:0, behavior:"smooth"}));

    /* =========================
       Plants (hero)
    ========================== */
    function fillPlants(rowId){
      const row = document.getElementById(rowId);
      for(let i=0;i<4;i++){
        const p = document.createElement("div");
        p.className = "plant";
        p.innerHTML = `<div class="leaf l1"></div><div class="leaf l2"></div><div class="leaf l3"></div>`;
        row.appendChild(p);
      }
    }
    ["row1","row2","row3"].forEach(fillPlants);

    /* =========================
       Modal
    ========================== */
    const modalOverlay = document.getElementById("modalOverlay");
    const modalClose = document.getElementById("modalClose");
    const mIcon = document.getElementById("mIcon");
    const mTitle = document.getElementById("mTitle");
    const mDesc = document.getElementById("mDesc");

    const modalMap = {
      solar: { icon:"‚òÄÔ∏è", t:"G√ºne≈ü Paneli", d:"Enerji verimliliƒüi i√ßin panel destekli kullanƒ±m kurgulanabilir. USB/Batarya yedek senaryosu planlanƒ±r." },
      sensors:{ icon:"üì°", t:"Sens√∂r Bloƒüu", d:"NDIR CO‚ÇÇ sens√∂r√º ppm deƒüerini okur. IAQ/VOC sens√∂r√º ortam kalitesini destekleyici olarak izler." },
      cleanair:{ icon:"üí®", t:"√áƒ±kƒ±≈ü Havasƒ±", d:"K√∂k b√∂lgesinden ge√ßen hava √ºst b√∂l√ºmden geri verilir. Ama√ß: hava akƒ±≈üƒ±nƒ± biyolojik filtreleme b√∂lgesine ta≈üƒ±mak." },
      plants:{ icon:"üåø", t:"Bitki Mod√ºl√º", d:"Dikey mod√ºlde farklƒ± bitkiler yeti≈ütirilebilir. G√∂r√ºn√ºr s√ºre√ß, √ßevre ve √ºretim farkƒ±ndalƒ±ƒüƒ± saƒülar." },
      felt:{ icon:"üßΩ", t:"Hidroponik Ke√ße", d:"Ke√ße katman suyu tutar ve k√∂kleri destekler. Bakƒ±m planƒ±yla birikim kontrol edilir." },
      fan:{ icon:"üåÄ", t:"Aktif Fan", d:"E≈üik a≈üƒ±ldƒ±ƒüƒ±nda fan devreye girer ve havayƒ± k√∂k b√∂lgesine y√∂nlendirir. S√ºreci hƒ±zlandƒ±rƒ±r." },
      water:{ icon:"üíß", t:"Su Haznesi", d:"Kapalƒ± d√∂ng√º hazne ve pompa hattƒ±. Sƒ±zdƒ±rmaz baƒülantƒ±lar ile kontroll√º kullanƒ±m hedeflenir." }
    };
    function openModal(key){
      const m = modalMap[key];
      if(!m) return;
      mIcon.textContent = m.icon;
      mTitle.textContent = m.t;
      mDesc.textContent = m.d;
      modalOverlay.classList.add("active");
      modalOverlay.setAttribute("aria-hidden","false");
    }
    function closeModal(){
      modalOverlay.classList.remove("active");
      modalOverlay.setAttribute("aria-hidden","true");
    }
    modalClose.addEventListener("click", closeModal);
    modalOverlay.addEventListener("click", (e)=>{ if(e.target === modalOverlay) closeModal(); });
    document.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeModal(); });
    document.querySelectorAll("[data-open]").forEach(btn=>{
      btn.addEventListener("click", ()=> openModal(btn.getAttribute("data-open")));
    });

    /* =========================
       Progress bar
    ========================== */
    const prog = document.getElementById("prog");
    window.addEventListener("scroll", ()=>{
      const doc = document.documentElement;
      const sc = doc.scrollTop || document.body.scrollTop;
      const max = (doc.scrollHeight - doc.clientHeight) || 1;
      prog.style.width = `${Math.min(100, (sc / max) * 100)}%`;
    });

    /* =========================
       Ambient particles
    ========================== */
    const air = document.getElementById("air");
    const actx = air.getContext("2d", { alpha:true });
    let W=0,H=0;
    function resizeAir(){
      const pr = window.devicePixelRatio || 1;
      W = air.width = window.innerWidth * pr;
      H = air.height = window.innerHeight * pr;
      air.style.width = window.innerWidth + "px";
      air.style.height = window.innerHeight + "px";
      actx.setTransform(1,0,0,1,0,0);
    }
    window.addEventListener("resize", resizeAir);
    resizeAir();

    const parts = Array.from({length: 58}, ()=>({
      x: Math.random()*window.innerWidth,
      y: Math.random()*window.innerHeight,
      r: Math.random()*2.0 + 0.35,
      s: Math.random()*0.35 + 0.10,
      a: Math.random()*0.22 + 0.06
    }));
    function drawAir(){
      const pr = window.devicePixelRatio || 1;
      actx.clearRect(0,0,W,H);
      actx.save();
      actx.scale(pr, pr);
      for(const p of parts){
        p.y -= p.s;
        p.x += Math.sin((p.y*0.01)) * 0.12;
        if(p.y < -10){ p.y = window.innerHeight + 10; p.x = Math.random()*window.innerWidth; }
        actx.beginPath();
        actx.fillStyle = `rgba(255,255,255,${p.a})`;
        actx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        actx.fill();
      }
      actx.restore();
      requestAnimationFrame(drawAir);
    }
    drawAir();

    /* =========================
       PILOT (interactive)
    ========================== */
    const pilotInputs = ["t0","t1","t2","thr","c0","c1","c2","a0","a1","a2"].reduce((acc,id)=>{
      acc[id]=document.getElementById(id);
      return acc;
    },{});
    const PILOT_KEY = "biyoduvar_pilot_v2026";
    function num(v){ const n = Number(v); return Number.isFinite(n) ? n : 0; }

    function getPilot(){
      const data = {
        t: [num(pilotInputs.t0.value), num(pilotInputs.t1.value), num(pilotInputs.t2.value)],
        thr: num(pilotInputs.thr.value),
        c: [num(pilotInputs.c0.value), num(pilotInputs.c1.value), num(pilotInputs.c2.value)],
        a: [num(pilotInputs.a0.value), num(pilotInputs.a1.value), num(pilotInputs.a2.value)]
      };
      if(data.t[1] <= data.t[0]) data.t[1] = data.t[0] + 1;
      if(data.t[2] <= data.t[1]) data.t[2] = data.t[1] + 1;
      data.thr = Math.max(400, data.thr || 800);
      return data;
    }
    function setPilot(data){
      pilotInputs.t0.value = data.t[0];
      pilotInputs.t1.value = data.t[1];
      pilotInputs.t2.value = data.t[2];
      pilotInputs.thr.value = data.thr;
      pilotInputs.c0.value = data.c[0];
      pilotInputs.c1.value = data.c[1];
      pilotInputs.c2.value = data.c[2];
      pilotInputs.a0.value = data.a[0];
      pilotInputs.a1.value = data.a[1];
      pilotInputs.a2.value = data.a[2];
    }
    function savePilot(){
      const d = getPilot();
      localStorage.setItem(PILOT_KEY, JSON.stringify(d));
      renderPilot();
      // demo threshold sync
      setDemoThresholdFromPilot();
    }
    function loadPilot(){
      try{
        const raw = localStorage.getItem(PILOT_KEY);
        if(!raw) return false;
        const d = JSON.parse(raw);
        if(!d || !d.t || !d.c || !d.a) return false;
        setPilot(d);
        return true;
      }catch(e){ return false; }
    }
    function resetPilot(){
      setPilot({ t:[0,20,40], thr:800, c:[520,980,1400], a:[520,780,980] });
      localStorage.removeItem(PILOT_KEY);
      renderPilot();
      setDemoThresholdFromPilot();
    }

    const pilotCanvas = document.getElementById("pilotChart");
    const pctx = pilotCanvas.getContext("2d");

    function resizeCanvasToBox(canvas){
      const box = canvas.parentElement;
      const dpr = window.devicePixelRatio || 1;
      const w = box.clientWidth;
      const h = box.clientHeight;
      canvas.width = Math.max(1, Math.floor(w * dpr));
      canvas.height = Math.max(1, Math.floor(h * dpr));
      canvas.style.width = w + "px";
      canvas.style.height = h + "px";
      return { w, h, dpr };
    }
    function niceRange(minV, maxV){
      if(maxV <= minV) return {min:minV-1, max:maxV+1};
      const pad = (maxV - minV) * 0.18;
      return {min: Math.max(0, minV - pad), max: maxV + pad};
    }

    function drawPilotChart(){
      const d = getPilot();
      const { w, h, dpr } = resizeCanvasToBox(pilotCanvas);
      pctx.setTransform(1,0,0,1,0,0);
      pctx.clearRect(0,0,pilotCanvas.width,pilotCanvas.height);
      pctx.save(); pctx.scale(dpr, dpr);

      const padL = 54, padR = 18, padT = 18, padB = 44;
      const innerW = w - padL - padR;
      const innerH = h - padT - padB;

      const all = [...d.c, ...d.a, d.thr];
      const mn = Math.min(...all);
      const mx = Math.max(...all);
      const rr = niceRange(mn, mx);

      const tMin = d.t[0], tMax = d.t[2];

      function X(i){
        const tVal = d.t[i];
        const p = (tVal - tMin) / ((tMax - tMin) || 1);
        return padL + p * innerW;
      }
      function Y(v){
        const p = (v - rr.min) / ((rr.max - rr.min) || 1);
        return padT + (1 - p) * innerH;
      }

      pctx.strokeStyle = "rgba(255,255,255,0.06)";
      pctx.lineWidth = 1;
      for(let i=0;i<=4;i++){
        const yy = padT + (innerH/4)*i;
        pctx.beginPath(); pctx.moveTo(padL, yy); pctx.lineTo(w - padR, yy); pctx.stroke();
      }

      pctx.fillStyle = "rgba(244,246,255,0.55)";
      pctx.font = "11px Montserrat";
      for(let i=0;i<=4;i++){
        const v = rr.max - ( (rr.max-rr.min)/4 )*i;
        const yy = padT + (innerH/4)*i;
        pctx.fillText(`${Math.round(v)}`, 10, yy+4);
      }
      pctx.save();
      pctx.translate(16, padT + innerH/2);
      pctx.rotate(-Math.PI/2);
      pctx.fillStyle = "rgba(244,246,255,0.45)";
      pctx.font = "11px Montserrat";
      pctx.fillText("CO‚ÇÇ (ppm)", 0, 0);
      pctx.restore();

      pctx.fillStyle = "rgba(244,246,255,0.62)";
      for(let i=0;i<3;i++){
        const xx = X(i);
        pctx.fillText(`${d.t[i]} dk`, xx - 14, h - 16);
      }
      pctx.fillStyle = "rgba(244,246,255,0.45)";
      pctx.fillText("Zaman (dk)", padL + innerW/2 - 34, h - 4);

      const yThr = Y(d.thr);
      pctx.strokeStyle = "rgba(255,209,102,0.38)";
      pctx.setLineDash([6,6]);
      pctx.beginPath(); pctx.moveTo(padL, yThr); pctx.lineTo(w - padR, yThr); pctx.stroke();
      pctx.setLineDash([]);
      pctx.fillStyle = "rgba(255,209,102,0.85)";
      pctx.fillText(`E≈üik: ${Math.round(d.thr)} ppm`, padL + 6, yThr - 8);

      function drawArea(values, base){
        pctx.beginPath();
        for(let i=0;i<3;i++){
          const xx = X(i), yy = Y(values[i]);
          if(i===0) pctx.moveTo(xx,yy); else pctx.lineTo(xx,yy);
        }
        pctx.lineTo(X(2), padT + innerH);
        pctx.lineTo(X(0), padT + innerH);
        pctx.closePath();
        pctx.fillStyle = base;
        pctx.fill();
      }
      function drawSeries(values, stroke, glow){
        pctx.strokeStyle = glow; pctx.lineWidth = 7; pctx.globalAlpha = 0.22;
        pctx.beginPath();
        for(let i=0;i<3;i++){ const xx=X(i), yy=Y(values[i]); if(i===0) pctx.moveTo(xx,yy); else pctx.lineTo(xx,yy); }
        pctx.stroke();
        pctx.globalAlpha = 1;

        pctx.strokeStyle = stroke; pctx.lineWidth = 3.2;
        pctx.beginPath();
        for(let i=0;i<3;i++){ const xx=X(i), yy=Y(values[i]); if(i===0) pctx.moveTo(xx,yy); else pctx.lineTo(xx,yy); }
        pctx.stroke();

        for(let i=0;i<3;i++){
          const xx=X(i), yy=Y(values[i]);
          pctx.fillStyle = stroke; pctx.beginPath(); pctx.arc(xx,yy,4.4,0,Math.PI*2); pctx.fill();
          pctx.fillStyle = "rgba(244,246,255,0.92)";
          pctx.font = "11px Montserrat";
          pctx.fillText(`${Math.round(values[i])} ppm`, xx + 10, yy - 10);
        }
      }
      drawArea(d.c, "rgba(255,91,122,0.10)");
      drawArea(d.a, "rgba(72,187,120,0.10)");
      drawSeries(d.c, "rgba(255,91,122,0.95)", "rgba(255,91,122,0.35)");
      drawSeries(d.a, "rgba(72,187,120,0.95)", "rgba(72,187,120,0.35)");

      pctx.restore();
    }

    function computePilotMetrics(d){
      const cRise = d.c[2] - d.c[0];
      const aRise = d.a[2] - d.a[0];
      const improve = (cRise > 0) ? Math.max(0, (cRise - aRise) / cRise) : 0;
      const endDiff = d.c[2] - d.a[2];
      const cAbove = d.c.filter(v => v >= d.thr).length;
      const aAbove = d.a.filter(v => v >= d.thr).length;
      return { cRise, aRise, improve, endDiff, cAbove, aAbove };
    }
    function fmtRise(x){ const v = Math.round(x); return (v >= 0 ? "+" : "") + v; }

    function renderPilotTable(){
      const d = getPilot();
      const tb = document.getElementById("pilotTbody");
      tb.innerHTML = "";
      for(let i=0;i<3;i++){
        const tr = document.createElement("tr");
        const delta = d.c[i] - d.a[i];
        tr.innerHTML = `
          <td style="color:#fff; font-weight:900;">${d.t[i]} dk</td>
          <td>${Math.round(d.c[i])}</td>
          <td style="color: rgba(72,187,120,0.95); font-weight:900;">${Math.round(d.a[i])}</td>
          <td style="color:${delta>=0 ? "rgba(72,187,120,0.95)" : "rgba(255,91,122,0.95)"}; font-weight:900;">${delta>=0?"+":""}${Math.round(delta)}</td>
        `;
        tb.appendChild(tr);
      }
    }

    function renderPilot(){
      const d = getPilot();
      const m = computePilotMetrics(d);
      const pct = Math.round(m.improve * 100);

      document.getElementById("bControl").textContent = `Kontrol: ${fmtRise(m.cRise)} ppm`;
      document.getElementById("bActive").textContent = `Aktif: ${fmtRise(m.aRise)} ppm`;
      document.getElementById("bImprove").innerHTML = `<span class="mini-dot"></span>KPI: %${pct}`;
      document.getElementById("endDiff").innerHTML = `<span class="mini-dot"></span>t2 farkƒ±: ${Math.round(m.endDiff)} ppm`;
      document.getElementById("overThreshold").textContent = `E≈üik √ºst√º nokta sayƒ±sƒ±: Kontrol ${m.cAbove} ‚Ä¢ Aktif ${m.aAbove}`;
      document.getElementById("co2ThresholdLbl").textContent = `E≈üik: ${Math.round(d.thr)} ppm`;

      const summary = `√ñzet: Kontrol ${fmtRise(m.cRise)} ppm, Aktif ${fmtRise(m.aRise)} ppm ‚Ä¢ ƒ∞yile≈üme: %${pct} ‚Ä¢ t2 farkƒ±: ${Math.round(m.endDiff)} ppm ‚Ä¢ E≈üik: ${Math.round(d.thr)} ppm`;
      document.getElementById("pilotSummary").textContent = summary;

      renderPilotTable();
      drawPilotChart();
    }

    document.getElementById("savePilot").addEventListener("click", savePilot);
    document.getElementById("resetPilot").addEventListener("click", resetPilot);
    document.getElementById("copyPilot").addEventListener("click", async ()=>{
      const txt = document.getElementById("pilotSummary").textContent || "";
      try{ await navigator.clipboard.writeText(txt); }catch(e){}
    });
    Object.values(pilotInputs).forEach(inp => inp.addEventListener("input", renderPilot));
    window.addEventListener("resize", ()=>{ drawPilotChart(); drawDashChart(); });

    loadPilot();
    renderPilot();

    /* =========================
       DEMO PANEL (FIXED + AUTO/MANUAL + SLIDER)
    ========================== */
    const dashCanvas = document.getElementById("dashChart");
    const dctx = dashCanvas.getContext("2d");

    const valCo2 = document.getElementById("valCo2");
    const valTemp = document.getElementById("valTemp");
    const valHum = document.getElementById("valHum");
    const consoleEl = document.getElementById("console");
    const fanBadge = document.getElementById("fanBadge");
    const dashThr = document.getElementById("dashThr");
    const modeBadge = document.getElementById("modeBadge");

    const ledStatus = document.getElementById("ledStatus");
    const ledMode = document.getElementById("ledMode");
    const ledFan = document.getElementById("ledFan");
    const ledPump = document.getElementById("ledPump");
    const deckClock = document.getElementById("deckClock");

    // Controls
    const autoToggle = document.getElementById("autoToggle");
    const modeText = document.getElementById("modeText");
    const thrSlider = document.getElementById("thrSlider");
    const thrVal = document.getElementById("thrVal");
    const fanToggleBtn = document.getElementById("fanToggleBtn");
    const pumpToggleBtn = document.getElementById("pumpToggleBtn");
    const panicBtn = document.getElementById("panicBtn");

    // Simulation state
    let co2 = 430;
    let temp = 24;
    let hum = 55;

    // History
    const histLen = 80;
    const hist = Array(histLen).fill(co2);

    // Targets
    let co2Target = 430;

    // Modes
    // NORMAL -> CROWDING -> CLEANING -> RECOVERY -> NORMAL
    let mode = "NORMAL";
    let fanOn = false;
    let pumpOn = false;

    // Demo threshold (independent from pilot after sync)
    let demoThreshold = 800;

    // Auto or Manual
    let isAuto = true;

    // Lock for scenario
    let scenarioLock = false;

    // Clock
    let simSeconds = 0;

    function logLine(msg){
      const div = document.createElement("div");
      div.className = "logline";
      div.textContent = `> ${msg}`;
      consoleEl.appendChild(div);
      while(consoleEl.children.length > 7) consoleEl.removeChild(consoleEl.firstChild);
    }

    function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }

    function setDemoThresholdFromPilot(){
      const p = getPilot();
      demoThreshold = clamp(Math.round(p.thr || 800), 600, 1400);
      thrSlider.value = String(demoThreshold);
      thrVal.textContent = `${demoThreshold} ppm`;
      dashThr.textContent = `E≈üik: ${demoThreshold} ppm`;
    }

    // Initialize demo threshold from pilot once
    setDemoThresholdFromPilot();

    // Slider update
    thrSlider.addEventListener("input", ()=>{
      demoThreshold = Number(thrSlider.value);
      thrVal.textContent = `${demoThreshold} ppm`;
      dashThr.textContent = `E≈üik: ${demoThreshold} ppm`;
      logLine(`E≈üik g√ºncellendi: ${demoThreshold} ppm`);
      // Auto moddaysa ve co2 √ºst√ºndeyse temizlemeyi tetikle
      if(isAuto && co2 >= demoThreshold && mode !== "CLEANING"){
        setMode("CLEANING");
        setActuators(true,true);
        logLine("Auto: E≈üik √ºst√º ‚Üí Temizleme ba≈ülatƒ±ldƒ±.");
      }
    });

    function setAuto(on){
      isAuto = on;
      modeText.textContent = isAuto ? "AUTO" : "MANUAL";
      logLine(isAuto ? "Kontrol modu: AUTO" : "Kontrol modu: MANUAL");
      // Manuala ge√ßince otomatik mod deƒüi≈ütirmesin
      updateManualButtons();
    }

    autoToggle.addEventListener("change", ()=>{
      setAuto(autoToggle.checked);
      // Auto'ya ge√ßince mevcut ko≈üula g√∂re toparla
      if(isAuto){
        if(co2 >= demoThreshold){
          setMode("CLEANING");
          setActuators(true,true);
          logLine("Auto: E≈üik √ºst√º ‚Üí Temizleme ba≈ülatƒ±ldƒ±.");
        } else {
          setMode("NORMAL");
          setActuators(false,false);
          logLine("Auto: Normal moda alƒ±ndƒ±.");
        }
      }
    });

    function updateManualButtons(){
      const disabled = isAuto;
      fanToggleBtn.disabled = disabled;
      pumpToggleBtn.disabled = disabled;
      fanToggleBtn.style.opacity = disabled ? "0.55" : "1";
      pumpToggleBtn.style.opacity = disabled ? "0.55" : "1";
    }
    updateManualButtons();

    fanToggleBtn.addEventListener("click", ()=>{
      if(isAuto) return;
      fanOn = !fanOn;
      fanToggleBtn.textContent = `Fan: ${fanOn ? "ON" : "OFF"}`;
      applyActuatorUI();
      logLine(`Manual: Fan ${fanOn ? "A√áIK" : "KAPALI"}`);
    });
    pumpToggleBtn.addEventListener("click", ()=>{
      if(isAuto) return;
      pumpOn = !pumpOn;
      pumpToggleBtn.textContent = `Pump: ${pumpOn ? "ON" : "OFF"}`;
      applyActuatorUI();
      logLine(`Manual: Pump ${pumpOn ? "A√áIK" : "KAPALI"}`);
    });

    panicBtn.addEventListener("click", ()=>{
      scenarioLock = false;
      co2 = 430; co2Target = 430;
      temp = 24; hum = 55;
      hist.fill(co2);
      mode = "NORMAL";
      if(isAuto){
        fanOn = false; pumpOn = false;
      }
      applyModeUI();
      applyActuatorUI();
      drawDashChart();
      updateHeroLCD();
      logLine("Reset: Sim√ºlasyon sƒ±fƒ±rlandƒ±.");
    });

    function setMode(next){
      mode = next;
      applyModeUI();
    }

    function setActuators(fan, pump){
      fanOn = fan;
      pumpOn = pump;
      applyActuatorUI();
    }

    function applyModeUI(){
      const label = mode === "NORMAL" ? "Normal"
                  : mode === "CROWDING" ? "Kalabalƒ±k"
                  : mode === "CLEANING" ? "Temizleme"
                  : "Toparlanma";
      modeBadge.innerHTML = `<span class="mini-dot"></span>Mod: ${label}`;
      ledMode.textContent = mode;
      ledMode.className = "ledvalue " + (mode === "NORMAL" ? "" : "warn");
    }

    function applyActuatorUI(){
      fanBadge.innerHTML = `<span class="mini-dot"></span>Fan: ${fanOn ? "aktif" : "beklemede"}`;
      ledFan.textContent = fanOn ? "ACTIVE" : "STANDBY";
      ledPump.textContent = pumpOn ? "RUN" : "IDLE";
      ledFan.className = "ledvalue " + (fanOn ? "warn" : "");
      ledPump.className = "ledvalue " + (pumpOn ? "warn" : "");
      // manual button labels
      fanToggleBtn.textContent = `Fan: ${fanOn ? "ON" : "OFF"}`;
      pumpToggleBtn.textContent = `Pump: ${pumpOn ? "ON" : "OFF"}`;
    }

    function updateLED(){
      let status = "GOOD";
      ledStatus.className = "ledvalue";
      if(co2 >= demoThreshold){
        status = "HIGH";
        ledStatus.className = "ledvalue bad";
      } else if (co2 >= demoThreshold * 0.9){
        status = "ELEVATED";
        ledStatus.className = "ledvalue warn";
      }
      ledStatus.textContent = status;
    }

    function formatClock(seconds){
      const m = String(Math.floor(seconds/60)).padStart(2,"0");
      const s = String(seconds%60).padStart(2,"0");
      return `${m}:${s}`;
    }

    function resizeDashCanvas(){
      const box = dashCanvas.parentElement;
      const dpr = window.devicePixelRatio || 1;
      const w = box.clientWidth;
      const h = box.clientHeight;
      dashCanvas.width = Math.max(1, Math.floor(w * dpr));
      dashCanvas.height = Math.max(1, Math.floor(h * dpr));
      dashCanvas.style.width = w + "px";
      dashCanvas.style.height = h + "px";
      return { w, h, dpr };
    }

    function niceRange2(minV, maxV){
      if(maxV <= minV) return {min:minV-1, max:maxV+1};
      const pad = (maxV - minV) * 0.12;
      return {min: Math.max(0, minV - pad), max: maxV + pad};
    }

    function drawDashChart(){
      const { w, h, dpr } = resizeDashCanvas();
      dctx.setTransform(1,0,0,1,0,0);
      dctx.clearRect(0,0,dashCanvas.width,dashCanvas.height);
      dctx.save();
      dctx.scale(dpr, dpr);

      const padL = 12, padR = 12, padT = 12, padB = 18;
      const iw = w - padL - padR;
      const ih = h - padT - padB;

      const minV = Math.min(...hist, 360);
      const maxV = Math.max(...hist, 1000);
      const rr = niceRange2(minV, maxV);

      dctx.strokeStyle = "rgba(255,255,255,0.06)";
      dctx.lineWidth = 1;
      for(let i=1;i<=2;i++){
        const yy = padT + (ih/3)*i;
        dctx.beginPath(); dctx.moveTo(padL, yy); dctx.lineTo(w - padR, yy); dctx.stroke();
      }

      const thr = demoThreshold;
      const yThr = padT + (1 - (thr - rr.min)/((rr.max - rr.min)||1)) * ih;
      dctx.strokeStyle = "rgba(255,209,102,0.28)";
      dctx.setLineDash([6,6]);
      dctx.beginPath(); dctx.moveTo(padL, yThr); dctx.lineTo(w - padR, yThr); dctx.stroke();
      dctx.setLineDash([]);

      const isHigh = co2 >= thr;
      dctx.strokeStyle = isHigh ? "rgba(255,91,122,0.95)" : "rgba(72,187,120,0.95)";
      dctx.lineWidth = 3;
      dctx.beginPath();
      hist.forEach((v,i)=>{
        const x = padL + (i/(hist.length-1))*iw;
        const y = padT + (1 - (v - rr.min)/((rr.max - rr.min)||1)) * ih;
        if(i===0) dctx.moveTo(x,y); else dctx.lineTo(x,y);
      });
      dctx.stroke();

      dctx.restore();
    }

    function updateHeroLCD(){
      const lcdPpm = document.getElementById("lcdPpm");
      const lcdStatus = document.getElementById("lcdStatus");
      lcdPpm.textContent = String(Math.round(co2));
      lcdStatus.textContent = (co2 < demoThreshold) ? "ƒ∞Yƒ∞" : "Y√úKSEK";
    }

    // Auto control logic (only when isAuto)
    function autoController(){
      if(!isAuto) return;

      if(mode === "NORMAL"){
        // if crosses threshold -> cleaning
        if(co2 >= demoThreshold){
          setMode("CLEANING");
          setActuators(true,true);
          logLine("Auto: E≈üik a≈üƒ±ldƒ± ‚Üí Temizleme modu.");
        }
      }

      if(mode === "CROWDING"){
        if(co2 >= demoThreshold){
          setMode("CLEANING");
          setActuators(true,true);
          logLine("Auto: Kalabalƒ±kta e≈üik a≈üƒ±ldƒ± ‚Üí Temizleme.");
        }
      }

      if(mode === "CLEANING"){
        if(co2 < demoThreshold * 0.85){
          setMode("RECOVERY");
          setActuators(true,false);
          logLine("Auto: Temizleme tamamlanƒ±yor ‚Üí Toparlanma.");
        }
      }

      if(mode === "RECOVERY"){
        if(co2 < demoThreshold * 0.78){
          setMode("NORMAL");
          setActuators(false,false);
          logLine("Auto: Normal moda d√∂nd√º.");
        }
      }
    }

    function physicsTick(){
      // Environment dynamics (slower)
      const approach = 0.13; // smaller = smoother/slow

      // Base drift
      if(mode === "NORMAL"){
        // stable around 420-560
        co2Target += (Math.random()*6 - 3);
        co2Target = clamp(co2Target, 390, 560);
      }

      if(mode === "CROWDING"){
        // slowly increase target
        co2Target += 18 + Math.random()*4;
        co2Target = Math.min(demoThreshold + 260, co2Target);
      }

      if(mode === "CLEANING"){
        // cleaning reduces target
        const strength = (fanOn ? 1 : 0.5) + (pumpOn ? 0.5 : 0.0); // manual affects too
        co2Target -= (16 + Math.random()*6) * strength;
        co2Target = Math.max(430, co2Target);
      }

      if(mode === "RECOVERY"){
        co2Target += (Math.random()*5 - 2.5);
        co2Target = clamp(co2Target, 410, 560);
      }

      // Manual effect even in NORMAL/CROWDING: If fan/pump ON, gently reduces target
      if(!isAuto && (fanOn || pumpOn) && mode !== "CLEANING"){
        const strength = (fanOn ? 1 : 0) + (pumpOn ? 0.6 : 0);
        co2Target -= (6 + Math.random()*3) * strength;
        co2Target = Math.max(420, co2Target);
      }

      // Apply inertia
      co2 = co2 + (co2Target - co2) * approach;

      // Temp/hum drift
      temp += (Math.random()*0.16 - 0.08);
      hum += (Math.random()*0.35 - 0.175);
      temp = clamp(temp, 18, 30);
      hum = clamp(hum, 35, 70);

      // History
      hist.push(co2);
      if(hist.length > histLen) hist.shift();

      // UI
      valCo2.textContent = String(Math.round(co2));
      valTemp.textContent = `${Math.round(temp)}¬∞C`;
      valHum.textContent = `${Math.round(hum)}%`;
      updateLED();
      updateHeroLCD();
      drawDashChart();

      // Clock
      simSeconds += 1;
      deckClock.innerHTML = `<span class="mini-dot"></span>t: ${formatClock(simSeconds)}`;

      // Auto logic
      autoController();
    }

    // Start demo baseline
    setMode("NORMAL");
    setActuators(false,false);
    updateLED();
    updateHeroLCD();
    drawDashChart();

    // 1s tick
    setInterval(physicsTick, 1000);

    // Scenario button: now always works and cannot break state
    const scenarioBtn = document.getElementById("scenarioBtn");

    function sleep(ms){ return new Promise(r=>setTimeout(r, ms)); }

    scenarioBtn.addEventListener("click", async ()=>{
      if(scenarioLock) {
        logLine("Senaryo zaten √ßalƒ±≈üƒ±yor‚Ä¶");
        return;
      }
      scenarioLock = true;

      scenarioBtn.disabled = true;
      scenarioBtn.style.opacity = "0.75";

      try{
        logLine("Senaryo ba≈üladƒ±: sƒ±nƒ±f kalabalƒ±kla≈üƒ±yor‚Ä¶");
        setMode("CROWDING");
        // In auto, keep actuators off until threshold (more realistic)
        if(isAuto) setActuators(false,false);

        // force a clear climb target to ensure it crosses threshold in reasonable time
        co2Target = Math.max(co2Target, demoThreshold + 200);

        await sleep(5000);
        logLine(`CO‚ÇÇ y√ºkseliyor‚Ä¶ (e≈üik: ${demoThreshold} ppm)`);
        await sleep(5000);
        logLine("Hava aƒüƒ±rla≈üƒ±yor. Sistem izliyor‚Ä¶");

        // Ensure threshold gets crossed visually
        if(co2 < demoThreshold) {
          co2Target = demoThreshold + 260;
          await sleep(3000);
        }

        // Auto will switch to CLEANING itself; manual user can trigger actuators
        logLine("M√ºdahale a≈üamasƒ±: sirk√ºlasyon ba≈ülƒ±yor (temizleme hissi).");
        await sleep(9000);

        // Let system recover
        if(isAuto){
          logLine("Senaryo bitti. Sistem normale d√∂n√ºyor‚Ä¶");
        } else {
          logLine("Senaryo bitti. Manual modda fan/pump sizde.");
        }
      } catch(e){
        console.error(e);
        logLine("Hata: Senaryo √ßalƒ±≈ütƒ±rƒ±lamadƒ±.");
      } finally {
        await sleep(1500);
        scenarioLock = false;
        scenarioBtn.disabled = false;
        scenarioBtn.style.opacity = "1";
      }
    });

    /* keep pilot changes reflected in demo threshold label when typing */
    pilotInputs.thr.addEventListener("input", ()=>{
      // only sync slider if user hasn't moved slider manually? (simple sync: always)
      setDemoThresholdFromPilot();
    });

  </script>
</body>
</html>
